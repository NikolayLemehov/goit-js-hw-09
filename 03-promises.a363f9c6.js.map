{"mappings":"qfAGA,MAAMA,EAAO,CACXC,KAAMC,SAASC,cAAc,cA8B/B,SAASC,EAAcC,EAAUC,GAC/B,OAAO,IAAIC,SAAQ,CAACC,EAASC,KAC3B,MAAMC,EAAgBC,KAAKC,SAAW,GACtCC,YAAW,KACLH,EACFF,EAAQ,C,SAACH,E,MAAUC,IAEnBG,EAAO,C,SAACJ,E,MAAUC,MAEnBA,MApCPN,EAAKC,KAAKa,iBAAiB,UAW3B,SAAsBC,GACpBA,EAAEC,iBACF,MAAOV,MAAAW,EAAKC,KAAEA,EAAIC,OAAEA,IAXDC,EAWuBpB,EAAKC,KAVxC,IAAImB,EAAQC,UAChBC,QAAOC,GAAMA,EAAGC,aAAa,UAC7BC,QAAO,CAACC,EAAKH,KAAQ,IACjBG,EACH,CAACH,EAAGI,aAAa,SAAUC,OAAOL,EAAGM,UACnC,KANR,IAAqBT,EAYnB,IAAK,IAAIU,EAAI,EAAGA,EAAIX,EAAQW,IAAK,CAC/BC,QAAQC,IAAIb,EAAQW,GACM1B,EAAc0B,EAAlB,IAANA,EAA2Bb,EAA0BA,EAAQa,EAAIZ,GAE9Ee,MAAK,EAAC5B,SAACA,EAAQC,MAAEA,MAChB4B,EAAAC,OAAOC,QAAQ,qBAAqB/B,QAAeC,UAEpD+B,OAAM,EAAChC,SAACA,EAAQC,MAAEA,MACjB4B,EAAAC,OAAOG,QAAQ,oBAAoBjC,QAAeC","sources":["src/js/03-promises.js"],"sourcesContent":["import \"notiflix/dist/notiflix-3.2.5.min.css\";\nimport {Notify} from 'notiflix/build/notiflix-notify-aio';\n\nconst refs = {\n  form: document.querySelector('form.form'),\n};\n\nrefs.form.addEventListener('submit', onSubmitForm)\n\nfunction getFormData(formRef) {\n  return [...formRef.elements]\n    .filter(it => it.hasAttribute('name'))\n    .reduce((acc, it) => ({\n      ...acc,\n      [it.getAttribute('name')]: Number(it.value),\n    }), {})\n}\n\nfunction onSubmitForm(e) {\n  e.preventDefault();\n  const {delay, step, amount} = getFormData(refs.form)\n  for (let i = 0; i < amount; i++) {\n    console.log(amount, i)\n    const promise = i === 0 ? createPromise(i, delay) : createPromise(i, delay + i * step);\n    promise\n      .then(({position, delay}) => {\n        Notify.success(`Fulfilled promise ${position} in ${delay}ms`);\n      })\n      .catch(({position, delay}) => {\n        Notify.failure(`Rejected promise ${position} in ${delay}ms`);\n      });\n  }\n}\n\nfunction createPromise(position, delay) {\n  return new Promise((resolve, reject) => {\n    const shouldResolve = Math.random() > 0.3;\n    setTimeout(() => {\n      if (shouldResolve) {\n        resolve({position, delay})\n      } else {\n        reject({position, delay})\n      }\n    }, delay)\n  })\n}\n"],"names":["$47d4ff9957288465$var$refs","form","document","querySelector","$47d4ff9957288465$var$createPromise","position","delay","Promise","resolve","reject","shouldResolve","Math","random","setTimeout","addEventListener","e","preventDefault","delay1","step","amount","formRef","elements","filter","it","hasAttribute","reduce","acc","getAttribute","Number","value","i","console","log","then","$iQIUW","Notify","success","catch","failure"],"version":3,"file":"03-promises.a363f9c6.js.map"}